<script>
        // --- CONFIGURATION ---
        var tentativesActuelles = 0;
        var tentativesMax = 3;
        
        // LISTE DES RÉPONSES ACCEPTÉES (Majuscules obligatoires ici)
        var reponsesPossibles = ["3", "TROIS", "3 MINUTES"]; 
        // ---------------------

        function verifierCode() {
            var champSaisie = document.getElementById("codeSaisi");
            var bouton = document.getElementById("boutonValider");
            var saisieUtilisateur = champSaisie.value;

            // Si le champ est vide, on arrête
            if (saisieUtilisateur.trim() === "") return;

            // 1. On incrémente le compteur
            tentativesActuelles++;
            
            // 2. Mise à jour de l'affichage du compteur
            document.getElementById("compteur-affichage").innerText = "Tentative : " + tentativesActuelles + " sur " + tentativesMax;

            // 3. VÉRIFICATION DE LA RÉPONSE
            // On nettoie la saisie (enlève les espaces autour et met tout en MAJUSCULES)
            var saisieNettoye = saisieUtilisateur.trim().toUpperCase();

            // On vérifie si la réponse du joueur est DANS la liste des possibles
            if (reponsesPossibles.includes(saisieNettoye)) {
                
                // --- VICTOIRE ---
                document.getElementById("contenu-secret").style.display = "block";
                document.getElementById("message-erreur").style.display = "none";
                document.getElementById("message-bloque").style.display = "none";
                document.getElementById("compteur-affichage").style.display = "none";
                
                champSaisie.style.display = "none";
                bouton.style.display = "none";

            } else {
                // --- ÉCHEC ---
                if (tentativesActuelles >= tentativesMax) {
                    // CAS : BLOCAGE DÉFINITIF
                    document.getElementById("message-erreur").style.display = "none";
                    document.getElementById("message-bloque").style.display = "block";
                    
                    champSaisie.disabled = true;
                    bouton.disabled = true;
                    bouton.innerText = "BLOQUÉ";
                    champSaisie.value = "ACCÈS REFUSÉ";
                } else {
                    // CAS : ERREUR MAIS ENCORE DES ESSAIS
                    document.getElementById("message-erreur").style.display = "block";
                    champSaisie.value = ""; // On vide le champ
                    champSaisie.focus();    // On remet le curseur dedans
                }
            }
        }
        
        // Touche Entrée pour valider
        document.getElementById("codeSaisi").addEventListener("keypress", function(event) {
            var bouton = document.getElementById("boutonValider");
            if (event.key === "Enter" && !bouton.disabled) {
                verifierCode();
            }
        });
    </script>
